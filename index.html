<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>The Unicorn Founder | 4ourmedia Game</title>
    <meta content="Build your empire from a garage to a global conglomerate in this addictive business simulator." name="description"/>
    
    <!-- Favicon -->
    <link href="images/favicon.ico" rel="icon" type="image/x-icon"/>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com" rel="preconnect"/>
    <link crossorigin href="https://fonts.gstatic.com" rel="preconnect"/>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=Courier+New:wght@700&display=swap" rel="stylesheet"/>
    
    <!-- Game Styles -->
    <link href="css/game.css" rel="stylesheet"/>
    <style>
        /* Mobile Tab Navigation */
        .mobile-nav {
            display: none;
        }
        @media (max-width: 1024px) {
            .mobile-nav {
                display: flex;
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                background: #1e293b;
                border-top: 1px solid rgba(255,255,255,0.1);
                z-index: 50;
                padding-bottom: env(safe-area-inset-bottom);
            }
            .mobile-nav-item {
                flex: 1;
                text-align: center;
                padding: 12px;
                color: #94a3b8;
                font-size: 0.75rem;
                cursor: pointer;
                -webkit-tap-highlight-color: transparent;
            }
            .mobile-nav-item.active {
                color: #3b82f6;
                background: rgba(59, 130, 246, 0.1);
            }
            .panel-content {
                display: none !important;
            }
            .panel-content.active {
                display: flex !important;
                flex-direction: column;
            }
            /* Hide desktop layout elements on mobile */
            .desktop-only {
                display: none !important;
            }
            .game-grid {
                display: block !important;
                height: calc(100vh - 140px); /* Adjust for header + nav */
                overflow-y: auto;
                padding-bottom: 80px;
            }
        }
    </style>
</head>
<body>
    <div class="game-container relative">
        <!-- Header / Stats Bar -->
        <header class="flex flex-col md:flex-row justify-between items-center mb-4 panel sticky top-0 z-40">
            <div class="flex items-center space-x-4 mb-2 md:mb-0">
                <div>
                    <div class="text-2xl font-bold text-white leading-none">
                        <span class="text-blue-500">Unicorn</span>Founder
                    </div>
                    <div class="text-[10px] text-gray-500 uppercase tracking-widest">A 4ourmedia Game</div>
                </div>
                <div class="text-sm text-gray-400 bg-slate-800 px-2 py-1 rounded">Day <span id="day-display" class="text-white font-mono">1</span></div>
            </div>
            
            <div class="flex space-x-4 md:space-x-8 w-full md:w-auto justify-between md:justify-end">
                <div class="text-center">
                    <div class="text-[10px] text-gray-400 uppercase tracking-wider">Cash</div>
                    <div class="text-xl md:text-2xl resource-value text-green-400">$<span id="cash-display">0</span></div>
                </div>
                <div class="text-center">
                    <div class="text-[10px] text-gray-400 uppercase tracking-wider">MRR</div>
                    <div class="text-xl md:text-2xl resource-value text-blue-400">$<span id="mrr-display">0</span>/s</div>
                </div>
                <div class="text-center hidden md:block">
                    <div class="text-[10px] text-gray-400 uppercase tracking-wider">Equity</div>
                    <div class="text-xl md:text-2xl resource-value text-yellow-400"><span id="equity-display">0</span>%</div>
                </div>
            </div>
        </header>

        <!-- Main Game Area -->
        <div class="game-grid grid grid-cols-1 lg:grid-cols-3 gap-6 flex-grow overflow-hidden">
            
            <!-- Left Panel: Strategy / Info -->
            <div class="panel flex flex-col panel-content active" id="tab-home">
                <h3 class="text-xl font-bold mb-4 text-gray-200 border-b border-gray-700 pb-2">Company Status</h3>
                <div class="space-y-4 flex-grow overflow-y-auto custom-scrollbar">
                    <div class="bg-slate-800 p-3 rounded border border-slate-700">
                        <div class="text-xs text-gray-400">Current Phase</div>
                        <div class="font-bold text-yellow-400" id="phase-display">Garage Startup</div>
                    </div>
                    <div class="bg-slate-800 p-3 rounded border border-slate-700">
                        <div class="text-xs text-gray-400">Valuation</div>
                        <div class="font-bold text-green-300">$<span id="valuation-display">0</span></div>
                    </div>
                    
                    <!-- Achievements Mini View -->
                    <div class="mt-6">
                        <h4 class="text-sm font-bold text-gray-400 mb-2 uppercase">Recent Milestones</h4>
                        <div id="achievements-list" class="space-y-2">
                            <!-- Injected by JS -->
                            <div class="text-xs text-gray-600 italic">No milestones yet. Get to work!</div>
                        </div>
                    </div>

                    <!-- Prestige Button -->
                    <div class="mt-auto pt-4">
                        <button id="prestige-btn" class="w-full bg-yellow-600/20 hover:bg-yellow-600/40 text-yellow-500 border border-yellow-600/50 py-2 rounded transition-all hidden">
                            Exit Company (Sell)
                        </button>
                    </div>
                </div>
            </div>

            <!-- Center Panel: The Grind -->
            <div class="panel flex flex-col items-center justify-center relative panel-content" id="tab-work">
                <div class="absolute top-4 left-4 text-gray-500 text-sm hidden lg:block">Office View</div>
                
                <div class="relative">
                    <button id="main-action-btn" class="main-btn group relative z-10">
                        <div>HUSTLE</div>
                        <span class="group-hover:text-white text-blue-200 text-xs">Click to Work</span>
                    </button>
                    <!-- Particle container -->
                    <div id="particles" class="absolute inset-0 pointer-events-none"></div>
                </div>
                
                <div class="mt-8 text-center text-gray-400 text-sm max-w-xs italic" id="flavor-text">
                    "Success is 1% inspiration, 99% perspiration."
                </div>
            </div>

            <!-- Right Panel: Upgrades -->
            <div class="panel flex flex-col panel-content" id="tab-shop">
                <div class="flex justify-between items-center mb-4 border-b border-gray-700 pb-2">
                    <h3 class="text-xl font-bold text-gray-200">Marketplace</h3>
                    <div class="text-xs text-gray-400">Spend Money to Make Money</div>
                </div>
                
                <!-- Filter Tabs -->
                <div class="flex space-x-2 mb-4 overflow-x-auto pb-2">
                    <button class="px-3 py-1 bg-blue-600 text-white text-xs rounded-full whitespace-nowrap" onclick="filterUpgrades('all')">All</button>
                    <button class="px-3 py-1 bg-slate-700 text-gray-300 text-xs rounded-full whitespace-nowrap hover:bg-slate-600" onclick="filterUpgrades('click')">Upgrades</button>
                    <button class="px-3 py-1 bg-slate-700 text-gray-300 text-xs rounded-full whitespace-nowrap hover:bg-slate-600" onclick="filterUpgrades('passive')">Staff & Tools</button>
                </div>

                <div class="overflow-y-auto flex-grow pr-2 custom-scrollbar" id="upgrade-list">
                    <!-- Upgrades injected by JS -->
                    <div class="text-center text-gray-500 mt-10">Loading Marketplace...</div>
                </div>
            </div>
        </div>

        <!-- Mobile Navigation -->
        <div class="mobile-nav">
            <div class="mobile-nav-item active" onclick="switchTab('home')">
                <div class="text-xl mb-1">ðŸ“Š</div>
                Stats
            </div>
            <div class="mobile-nav-item" onclick="switchTab('work')">
                <div class="text-xl mb-1">ðŸ”¨</div>
                Work
            </div>
            <div class="mobile-nav-item" onclick="switchTab('shop')">
                <div class="text-xl mb-1">ðŸ›’</div>
                Shop
            </div>
        </div>

        <!-- Footer / News Ticker -->
        <div class="mt-4 mb-20 lg:mb-0">
            <div class="ticker-wrap rounded-lg mb-4">
                <div class="ticker" id="news-content">
                    BREAKING: 4ourmedia launches new viral simulator game... Analysts predict productivity drop worldwide...
                </div>
            </div>
            
            <footer class="text-center text-xs text-gray-500 py-4 border-t border-gray-800">
                <div class="flex flex-col md:flex-row justify-center items-center space-y-2 md:space-y-0 md:space-x-6">
                    <span>&copy; <span id="copyright-year">2025</span> 4ourmedia. All rights reserved.</span>
                    <a href="mailto:hq@4ourmedia.com" class="hover:text-blue-400 transition">hq@4ourmedia.com</a>
                    <a href="https://davidjwoodbury.com" target="_blank" class="hover:text-blue-400 transition">Created by David J. Woodbury</a>
                </div>
                <div class="mt-2 space-x-4">
                    <a href="privacy.html" class="hover:text-gray-300">Privacy Policy</a>
                    <a href="terms.html" class="hover:text-gray-300">Terms of Service</a>
                </div>
            </footer>
        </div>
    </div>

    <!-- Game Logic -->
    <script src="js/game.js"></script>
    <script>
        // Mobile Tab Logic
        function switchTab(tabName) {
            // Hide all panels
            document.querySelectorAll('.panel-content').forEach(el => {
                el.classList.remove('active');
                // On desktop, we want them all visible, so we only toggle 'active' which controls display:flex in mobile media query
                // But wait, the media query handles the display property.
                // We need to manually handle the 'active' class for the mobile view logic defined in CSS.
            });
            
            // Show selected panel
            const selected = document.getElementById(`tab-${tabName}`);
            if(selected) selected.classList.add('active');
            
            // Update nav icons
            document.querySelectorAll('.mobile-nav-item').forEach(el => el.classList.remove('active'));
            // This is a simple implementation, assuming order matches. 
            // Better to use IDs or data attributes, but for now:
            if(tabName === 'home') document.querySelectorAll('.mobile-nav-item')[0].classList.add('active');
            if(tabName === 'work') document.querySelectorAll('.mobile-nav-item')[1].classList.add('active');
            if(tabName === 'shop') document.querySelectorAll('.mobile-nav-item')[2].classList.add('active');
        }

        // Set Copyright Year
        document.getElementById('copyright-year').innerText = new Date().getFullYear();
        
        // Initialize Mobile View (Default to Work tab on mobile)
        if (window.innerWidth <= 1024) {
            switchTab('work');
        }
    </script>
</body>
</html>
